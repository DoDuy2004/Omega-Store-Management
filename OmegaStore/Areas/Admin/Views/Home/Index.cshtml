@model OmegaStore.Models.ViewModels.StatisticViewModel
@{
    ViewData["Title"] = "Tổng Quan";

    int i = 1;
}

@section Styles {
    <link rel="stylesheet" href="~/admin/css/Custum.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
}

@section Scripts {
    <script src="~/admin/js/zoom.js"></script>
    <script src="~/admin/js/apexcharts/apexcharts.js"></script>
    <script src="~/admin/js/apexcharts/line-chart-1.js"></script>
    <script src="~/admin/js/apexcharts/line-chart-2.js"></script>
    <script src="~/admin/js/apexcharts/line-chart-3.js"></script>
    <script src="~/admin/js/apexcharts/line-chart-4.js"></script>
    <script src="~/admin/js/apexcharts/line-chart-5.js"></script>
    <script src="~/admin/js/apexcharts/line-chart-6.js"></script>
    <script src="~/admin/js/switcher.js"></script>
    <script src="~/admin/js/theme-settings.js"></script>
    <script>
        const LineChart = document.getElementById('myLineChart').getContext('2d');
        const myLineChart = new Chart(LineChart, {
            type: 'line',
            data: {
                labels: @Html.Raw(Json.Serialize(ViewBag.ChartLabels)),
                datasets: [
                    {
                        label: 'Thu',
                        data: @Html.Raw(Json.Serialize(ViewBag.ChartData)), // dữ liệu cho thu
                        borderColor: 'rgba(75, 192, 192, 1)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        fill: true,
                    },
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Biểu Đồ Đường: doanh thu (2025)'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
}

<div class="main-content">
    <!-- main-content-wrap -->
    <div class="main-content-inner">
        <!-- main-content-wrap -->
        <div class="main-content-wrap">
            <div class="tf-section-4 mb-30">
                <!-- chart-default -->
                <div class="wg-chart-default">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap14">
                            <div class="image type-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="52" viewBox="0 0 48 52"
                                     fill="none">
                                    <path d="M19.1094 2.12943C22.2034 0.343099 26.0154 0.343099 29.1094 2.12943L42.4921 9.85592C45.5861 11.6423 47.4921 14.9435 47.4921 18.5162V33.9692C47.4921 37.5418 45.5861 40.8431 42.4921 42.6294L29.1094 50.3559C26.0154 52.1423 22.2034 52.1423 19.1094 50.3559L5.72669 42.6294C2.63268 40.8431 0.726688 37.5418 0.726688 33.9692V18.5162C0.726688 14.9435 2.63268 11.6423 5.72669 9.85592L19.1094 2.12943Z"
                                          fill="#22C55E" />
                                </svg>
                                <i class="icon-shopping-bag"></i>
                            </div>
                            <div>
                                <div class="body-text mb-2">Tổng sản phẩm đã bán</div>
                                <h4>@Model.TotalProductSold</h4>
                            </div>
                        </div>
                    </div>
                    <div class="wrap-chart">
                        <div id="line-chart-1"></div>
                    </div>
                </div>
                <!-- /chart-default -->
                <!-- chart-default -->
                <div class="wg-chart-default">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap14">
                            <div class="image type-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="52" viewBox="0 0 48 52"
                                     fill="none">
                                    <path d="M19.1094 2.12943C22.2034 0.343099 26.0154 0.343099 29.1094 2.12943L42.4921 9.85592C45.5861 11.6423 47.4921 14.9435 47.4921 18.5162V33.9692C47.4921 37.5418 45.5861 40.8431 42.4921 42.6294L29.1094 50.3559C26.0154 52.1423 22.2034 52.1423 19.1094 50.3559L5.72669 42.6294C2.63268 40.8431 0.726688 37.5418 0.726688 33.9692V18.5162C0.726688 14.9435 2.63268 11.6423 5.72669 9.85592L19.1094 2.12943Z"
                                          fill="#FF5200" />
                                </svg>
                                <i class="icon-clipboard"></i>
                            </div>
                            <div>
                                <div class="body-text mb-2">Tổng đơn hoàn thành</div>
                                <h4>@Model.TotalOrderCompleted</h4>
                            </div>
                        </div>
                    </div>
                    <div class="wrap-chart">
                        <div id="line-chart-2"></div>
                    </div>
                </div>
                <!-- /chart-default -->
                <!-- chart-default -->
                <div class="wg-chart-default">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap14">
                            <div class="image type-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="52" viewBox="0 0 48 52"
                                     fill="none">
                                    <path d="M19.1094 2.12943C22.2034 0.343099 26.0154 0.343099 29.1094 2.12943L42.4921 9.85592C45.5861 11.6423 47.4921 14.9435 47.4921 18.5162V33.9692C47.4921 37.5418 45.5861 40.8431 42.4921 42.6294L29.1094 50.3559C26.0154 52.1423 22.2034 52.1423 19.1094 50.3559L5.72669 42.6294C2.63268 40.8431 0.726688 37.5418 0.726688 33.9692V18.5162C0.726688 14.9435 2.63268 11.6423 5.72669 9.85592L19.1094 2.12943Z"
                                          fill="#CBD5E1" />
                                </svg>
                                <i class="icon-box"></i>
                            </div>
                            <div>
                                <div class="body-text mb-2">Tổng sản phẩm</div>
                                <h4>@Model.TotalProduct</h4>
                            </div>
                        </div>
                    </div>
                    <div class="wrap-chart">
                        <div id="line-chart-3"></div>
                    </div>
                </div>
                <!-- /chart-default -->
                <!-- chart-default -->
                <div class="wg-chart-default">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap14">
                            <div class="image type-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="52" viewBox="0 0 48 52"
                                     fill="none">
                                    <path d="M19.1094 2.12943C22.2034 0.343099 26.0154 0.343099 29.1094 2.12943L42.4921 9.85592C45.5861 11.6423 47.4921 14.9435 47.4921 18.5162V33.9692C47.4921 37.5418 45.5861 40.8431 42.4921 42.6294L29.1094 50.3559C26.0154 52.1423 22.2034 52.1423 19.1094 50.3559L5.72669 42.6294C2.63268 40.8431 0.726688 37.5418 0.726688 33.9692V18.5162C0.726688 14.9435 2.63268 11.6423 5.72669 9.85592L19.1094 2.12943Z"
                                          fill="#2377FC" />
                                </svg>
                                <i class="icon-edit-3"></i>
                            </div>
                            <div>
                                <div class="body-text mb-2">Tổng danh mục</div>
                                <h4>@Model.TotalCategory</h4>
                            </div>
                        </div>
                    </div>
                    <div class="wrap-chart">
                        <div id="line-chart-4"></div>
                    </div>
                </div>
                <!-- /chart-default -->
            </div>
            <div class="tf-section-5 mb-30">
                <!-- chart -->
                <div class="wg-box">
                    <div class="flex items-center justify-between">
                        <h5>Thống kê doanh thu</h5>
                        <div class="dropdown default">
                            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <span class="icon-more"><i class="icon-more-horizontal"></i></span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <a href="javascript:void(0);">This Week</a>
                                </li>
                                <li>
                                    <a href="javascript:void(0);">Last Week</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <canvas id="myLineChart"></canvas>
                </div>
                <!-- top-product -->
                <div class="wg-box">
                    <div class="flex items-center justify-between">
                        <h5>Sản phẩm bán chạy</h5>
                        <div class="dropdown default">
                            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <span class="view-all">Xem thêm</span>
                            </button>

                        </div>
                    </div>
                    <div class="wg-table table-top-product">
                        <ul class="flex flex-column gap14">
                            @foreach(var item in Model.BestSellingProducts )
                            {
                                <li class="product-item">
                                    <div class="rank">
                                        <p>@i</p>
                                    </div>
                                    <div class="image">
                                        <img src="~/img/products/@item.Thumbnail" alt="">
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <div class="name">
                                            <a href="product-list.html" class="body-title-2">
                                                @item.ProductName
                                            </a>
                                            <div class="text-tiny mt-3">@item.Stock Items</div>
                                        </div>
                                        <div>
                                            <div class="text-tiny mb-3">Lượt bán</div>
                                            <div class="body-text">@item.TotalQuantitySold</div>
                                        </div>

                                    </div>
                                </li>
                                i++;
                            }
                        </ul>
                    </div>
                </div>
                <!-- /top-product -->
            </div>
            <div class="tf-section-12 mb-30 col-lg-12">
                <!-- product-overview -->
                <div class="wg-box">
                    <div class="flex items-center justify-between">
                        <h5>Đơn hàng mới</h5>
                        <div class="dropdown default">
                            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <span class="view-all">Hiển thị<i class="icon-chevron-down"></i></span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                    <a href="javascript:void(0);">3 days</a>
                                </li>
                                <li>
                                    <a href="javascript:void(0);">7 days</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="wg-table table-product-overview">
                        <ul class="table-title flex gap20 mb-14">
                            <li>
                                <div class="body-title">Mã đơn</div>
                            </li>
                            <li>
                                <div class="body-title">Người đặt</div>
                            </li>
                            <li>
                                <div class="body-title">Ngày đặt</div>
                            </li>
                            <li>
                                <div class="body-title">Tổng tiền</div>
                            </li>
                            <li>
                                <div class="body-title">Trạng thái</div>
                            </li>
                        </ul>
                        <ul class="flex flex-column gap10">
                            @foreach(var order in Model.NewOrders ?? new List<Order>())
                            {
                                <li class="product-item gap14">
                                    <div class="flex items-center justify-between flex-grow">
                                        <div class="name">
                                            <a href="product-list.html" class="body-text">@order.OrderCode</a>
                                        </div>
                                        <div class="body-text">@order.Fullname</div>
                                        <div class="body-text">@order.CreatedAt</div>
                                        <div class="body-text">@order.TotalAmount VNĐ</div>
                                        <div class="block-available">Chờ xác nhận</div>
                                    </div>
                                </li>
                            }
                           
                        </ul>
                    </div>
                    <div class="divider"></div>
@*                     <div class="flex items-center justify-between flex-wrap gap10">
                        <div class="text-tiny">Hiển thị: 5</div>
                        <ul class="wg-pagination">
                            <li>
                                <a href="#"><i class="icon-chevron-left"></i></a>
                            </li>
                            <li>
                                <a href="#">1</a>
                            </li>
                            <li class="active">
                                <a href="#">2</a>
                            </li>
                            <li>
                                <a href="#">3</a>
                            </li>
                            <li>
                                <a href="#"><i class="icon-chevron-right"></i></a>
                            </li>
                        </ul>
                    </div> *@
                </div>
                <!-- /product-overview -->
            </div>
            <div class="tf-section-3">
            </div>
        </div>
        <!-- /main-content-wrap -->
    </div>
    <!-- /main-content-wrap -->
    <!-- bottom-page -->
    <div class="bottom-page">
        <div class="body-text">Copyright © 2024 Remos. Design with</div>
        <i class="icon-heart"></i>
        <div class="body-text">
            by <a href="https://themeforest.net/user/themesflat/portfolio">Themesflat</a> All
            rights reserved.
        </div>
    </div>
    <!-- /bottom-page -->
</div>